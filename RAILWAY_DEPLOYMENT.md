# Railway Deployment Guide - WeAreDevelopers Conference Dashboard

This guide provides step-by-step instructions for deploying your wed-dashboard application to Railway.

## Prerequisites
- GitHub account with your wed-dashboard repository
- Railway account (free tier includes $5/month credit)

## Step 1: Railway Account Setup

1. Go to [railway.app](https://railway.app)
2. Click "Login" and authenticate with GitHub
3. Grant Railway access to your repositories
4. You'll receive $5 in monthly credits (sufficient for your usage)

## Step 2: Create New Project

1. Click "New Project" on Railway dashboard
2. Select "Deploy from GitHub repo"
3. Choose your `wed-dashboard` repository
4. Railway automatically detects your `Dockerfile` âœ…

## Step 3: Add PostgreSQL Database

1. In your project dashboard, click "+ New Service"
2. Select "Database" â†’ "PostgreSQL"
3. Railway provisions a managed PostgreSQL instance
4. Note: Database will be accessible via environment variables

## Step 4: Configure Environment Variables

In your app service, go to "Variables" and add these environment variables:

### Required Variables
```
SPRING_PROFILES_ACTIVE=prod
JWT_SECRET=your-strong-production-jwt-secret-here-make-it-long-and-random
```

### Database Variables (Auto-generated by Railway)
These are automatically provided when you add PostgreSQL:
```
DB_HOST=${{Postgres.PGHOST}}
DB_PORT=${{Postgres.PGPORT}}
DB_NAME=${{Postgres.PGDATABASE}}
DB_USERNAME=${{Postgres.PGUSER}}
DB_PASSWORD=${{Postgres.PGPASSWORD}}
```

### Generate Strong JWT Secret
Use this command to generate a secure JWT secret:
```bash
openssl rand -base64 64
```
Or use an online generator to create a 64-character random string.

## Step 5: Deploy

1. Railway automatically starts building after configuration
2. Build process:
   - Builds Angular frontend (production mode)
   - Compiles Spring Boot application
   - Creates single JAR with embedded frontend
   - Starts the application

3. Monitor deployment in Railway logs
4. Once complete, you'll get a public URL like:
   `https://wed-dashboard-production-xxxx.up.railway.app`

## Step 6: First Launch Setup

1. Visit your Railway URL
2. The application will automatically:
   - Create database tables
   - Initialize demo data (3 demo users + conference talks)
3. Test login with demo users:
   - Username: `demo1`, Password: `password123`
   - Username: `demo2`, Password: `password123`
   - Username: `demo3`, Password: `password123`

## Step 7: Custom Domain (Optional)

1. In Railway project settings, go to "Domains"
2. Add your custom domain
3. Railway provides SSL certificates automatically
4. Update DNS records as shown in Railway dashboard

## Configuration Summary

### What's Deployed
- **Single Container**: Angular frontend + Spring Boot backend
- **Database**: Managed PostgreSQL with persistent storage
- **HTTPS**: Automatic SSL/TLS certificates
- **Auto-deploy**: Pushes to GitHub trigger deployments

### Environment Configuration
- **Profile**: `prod` (optimized logging, security settings)
- **Port**: Dynamic (Railway manages this automatically)
- **Database**: Fully managed PostgreSQL
- **Authentication**: JWT tokens with production secret

## Expected Costs

### Free Tier Usage (Monthly)
- **App Service**: ~$2-3/month
- **PostgreSQL**: ~$1-2/month
- **Total**: ~$3-5/month (covered by $5 credit)

### Usage Breakdown
- **13 registered users + anonymous browsing**
- **Minimal compute requirements**
- **Small database footprint**
- **Low bandwidth usage**

## Troubleshooting

### Build Issues
```bash
# Check Railway build logs
# Common issues:
# - Node.js version conflicts (using Node 18)
# - Maven build failures (check pom.xml)
# - Frontend build issues (check package.json)
```

### Runtime Issues
```bash
# Check Railway application logs
# Common issues:
# - Database connection errors (check environment variables)
# - JWT secret not set (verify JWT_SECRET variable)
# - Port binding issues (should auto-resolve with PORT variable)
```

### Database Issues
```bash
# Access database via Railway dashboard
# Check connection in Railway PostgreSQL service logs
# Verify environment variables are correctly linked
```

## Post-Deployment Checklist

- [ ] Application loads at Railway URL
- [ ] Login functionality works
- [ ] Talk list displays correctly
- [ ] Rating system functions
- [ ] Database persists data between restarts
- [ ] Demo users can authenticate
- [ ] HTTPS works correctly

## Maintenance

### Automatic Updates
- Push to GitHub main branch = automatic deployment
- Railway rebuilds and redeploys automatically
- Zero downtime deployments

### Monitoring
- Railway provides built-in metrics
- Application logs available in dashboard
- Database monitoring included

### Scaling
- Railway auto-scales based on usage
- For your usage (13 users), scaling is automatic
- Monitor usage in Railway dashboard

## Security Notes

### Production Security
- JWT secret externalized to environment variables
- Database credentials managed by Railway
- HTTPS enforced automatically
- CORS configured for Railway domains

### User Management
- Demo users included for testing
- Production deployment ready for real users
- Change default passwords for demo accounts

## Next Steps

1. **Test thoroughly**: Verify all functionality works
2. **Update demo data**: Replace with real conference data if needed
3. **User management**: Create real user accounts
4. **Custom domain**: Add your preferred domain
5. **Monitoring**: Set up alerts if desired

Your WeAreDevelopers Conference Dashboard is now production-ready on Railway! ðŸš€

## Support
- Railway Documentation: https://docs.railway.app
- Railway Discord: https://discord.gg/railway
- Your application health check: `https://your-app-url/actuator/health`
